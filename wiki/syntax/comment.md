# JiLang注释系统

JiLang提供了两种不同的注释方式，让开发者可以根据不同场景选择最合适的注释风格。注释是代码中非常重要的部分，有助于提高代码可读性和可维护性。

## 注释类型概述

JiLang支持以下两种注释格式：

| 注释类型 | 语法 | 特点 |
|---------|------|------|
| 代码注释语句 | `{"comment": "注释内容"}` | 标准JSON语法，可包含变量引用 |
| 双斜杠注释 | `// 注释内容` | 简洁易用，但不是标准JSON格式 |

## 代码注释语句

代码注释语句是JiLang的标准注释方式，通过`comment`语句实现。这种注释完全符合JSON语法规范，可以在任何语句位置使用。

### 单行注释

单行注释使用字符串形式：

```json
{"comment": "这是一个简单的注释"}
```

### 多部分注释（包含变量引用）

多部分注释使用数组形式，可以包含变量引用，在运行时动态解析：

```json
{"comment": ["当前计数值是: ", "@var.counter"]}
{"comment": ["用户 ", "@var.user.name", " 的得分是: ", "@var.user.score"]}
```

### 执行行为

`comment`语句在正常执行模式下不会有任何输出或操作，被解释器完全忽略。但在调试模式下，注释内容会被解析并显示出来，尤其是包含变量引用的注释，可以显示变量的实时值。

代码注释语句实际上是一种不执行任何操作的语句，它不会改变程序状态或产生任何副作用。

示例：
```json
{"var": {"count": 42}},
{"comment": "这是一个固定文本注释"},
{"comment": ["当前计数: ", "@var.count"]}
```

在调试模式下会显示：
```
// 注释: 这是一个固定文本注释
// 注释: 当前计数: 42
```

## 双斜杠注释

双斜杠注释（`//`）提供了一种更简洁的注释方式，与许多主流编程语言保持一致。这种注释不是标准JSON语法的一部分，但JiLang解释器会在解析JSON前自动移除这些注释。

### 整行注释

可以用双斜杠注释整行代码：

```json
// 这是一个整行注释
{"var": {"x": 10}}
```

### 行尾注释

可以在代码行末尾添加注释：

```json
{"var": {"y": 20}}  // 这是一个行尾注释
```

### 嵌套在JSON结构中

双斜杠注释可以出现在JSON结构的任何位置：

```json
{
    // 这是嵌套在对象中的注释
    "program": {
        "main": {
            "body": [
                // 这是嵌套在数组中的注释
                {"echo": ["Hello"]}
            ]
        }
    }
}
```

### 执行行为

双斜杠注释会在JSON解析前完全被移除，因此它们对解释器完全透明。这些注释不会在调试模式下显示，也不能包含变量引用。

## 注释风格对比

### 代码注释语句优势

- 是标准JSON语法的一部分
- 在调试模式下可见，便于调试
- 可以包含变量引用，显示实时值
- 支持多部分组合注释

### 代码注释语句劣势

- 语法较冗长
- 只能作为JSON对象的一部分使用
- 不能用于行尾注释

### 双斜杠注释优势

- 语法简洁，编写快速
- 熟悉的语法，与大多数编程语言一致
- 可以注释掉整行代码（临时禁用）
- 可以添加行尾注释
- 可在JSON任何位置使用（包括对象外部）

### 双斜杠注释劣势

- 不是标准JSON语法
- 在调试模式下不可见，被预处理完全移除
- 不能包含变量引用等动态内容

## 推荐使用场景

根据不同需求选择合适的注释风格：

1. **开发阶段**：
   - 使用`//`注释进行快速注释、临时禁用代码和添加简单说明
   - 适合频繁修改和测试的代码

2. **调试阶段**：
   - 使用`{"comment": "..."}`对象注释显示中间变量值
   - 特别是使用`{"comment": ["说明:", "@var.变量"]}`格式查看变量实时值

3. **文档和维护**：
   - 在重要算法或逻辑处使用`{"comment": "..."}`注释
   - 对于简单的代码说明，使用`//`注释

4. **混合使用**：
   ```json
   // 这部分实现了快速排序算法
   {"comment": "开始排序，数组大小: "},
   {"array.length": ["@var.items"]},
   {"comment": ["数组元素数量: ", "@var.result"]}
   ```

## 完整示例

```json
// 这是一个使用混合注释风格的示例
{
    "include": ["math"], // 包含数学模块
    "program": {
        "main": {
            "body": [
                // 使用双斜杠注释
                {"echo": ["测试注释功能：\n\n"]},
                
                {"var": {"number": 16}}, // 设置一个变量
                
                // 使用数学模块计算平方根
                {"comment": ["接下来计算", "@var.number", "的平方根"]},
                {"math.sqrt": ["@var.number"]},
                {"var": {"sqrt_result": "@var.result"}},
                
                {"comment": "显示计算结果"},
                {"echo": ["平方根结果: ", "@var.sqrt_result", "\n"]}
            ]
        }
    }
}
```

## 相关主题

- [基本语法](basic.md) - JiLang的基本语法概念
- [变量与类型](variables.md) - 变量声明和类型系统
- [引用符号](reference_symbols.md) - 变量引用系统 