# JiLang 0.3.2 - 函数返回值升级与call语句弃用

## 主要改进

### 1. 函数返回值机制增强

在0.3.2版本中，我们改进了函数返回值机制，提供了更灵活的函数调用方式。现在函数调用可以直接在表达式中使用，无需依赖中间变量。

**双重兼容方案**：

1. **自定义返回变量支持**：
   - 通过对象参数中的`output`字段指定返回结果的变量名
   - 示例：`{"array.create": {"size": 5, "output": "myArray"}}`
   - 函数结果将存储在指定的变量中，同时作为表达式的返回值

2. **函数调用约定修改**：
   - 函数返回值可直接用于表达式的嵌套计算
   - 支持函数组合和链式调用
   - 向后兼容：执行后默认仍会将结果存储在`result`变量中

### 2. 详细值显示改进

新增`--show-values`命令行参数，启用详细的JSON值显示：

- 显示对象和数组的完整内容，而不是简化的`<object>`和`<array>`表示
- 在表达式中嵌套的函数调用会被递归执行和显示
- 支持变量引用嵌套的表达式对象解析

### 3. call语句弃用

为简化函数调用方式并减少混淆，我们弃用了旧的`call`语句：

- 所有函数调用推荐使用直接语法：`{"module.function": [参数]}`或`{"function": [参数]}`
- 原`call`语句仍可通过命令行参数`--allow-call`临时启用
- 无需`call`语句的新语法更加简洁且与其他语句格式一致
- 计划在后续版本中完全移除`call`语句支持

## 使用示例

```json
// 链式调用示例 - 创建数组、获取长度、计算2倍
{
  "var": {
    "doubledLength": {
      "math.multiply": [
        {
          "array.length": [
            {
              "array.create": [1, 2, 3, 4, 5]
            }
          ]
        },
        2
      ]
    }
  }
}

// 自定义输出变量示例
{
  "array.create": {
    "size": 5,
    "init": 0,
    "output": "myArray"
  }
}
```

## 访问嵌套属性

在JiLang中访问对象的嵌套属性需要使用连续的`object.get`调用：

```json
// 获取user对象中contacts对象的email属性
{
  "object.get": [
    {
      "object.get": ["$user", "contacts"]
    },
    "email"
  ]
}
```

## 命令行参数更新

本版本新增了以下命令行参数：

- `--show-values`: 启用详细JSON值显示，展示完整的对象和数组内容
- `--allow-call`: 临时启用已弃用的call语句支持（将在未来版本中完全移除）

## 向后兼容性

此版本部分向后兼容现有程序，同时提供更灵活的函数式编程能力。现有代码需修改call语句为新语法即可运行（或使用`--allow-call`参数）。
